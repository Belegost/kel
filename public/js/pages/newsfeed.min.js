var page=0;$(".load-more-news").on("click",function(t){t.preventDefault();var a=$(this).data("targetUrl"),o=$(this);o.prop("disabled",!0),$.ajax({url:a,type:"POST",cache:!1,data:{currentpage:page},dataType:"json",processData:!1,contentType:!1,success:function(t){"success"==t.status?(page++,o.before(t.data),o.prop("disabled",!1)):displayPopupMsg(t.error)},complete:function(){o.prop("disabled",!1)}})});var totalHistogrammWrap=document.getElementById("total_histogramm"),totalHistogrammTooltips=function(e){var t=document.getElementById("total_histogramm_tooltip");if(t||((t=document.createElement("div")).id="total_histogramm_tooltip",t.className="charts-tooltip",this._chart.canvas.parentNode.appendChild(t),tooltipPointer=document.createElement("div"),tooltipPointer.className="charts-tooltip-pointer",t.appendChild(tooltipPointer),tooltipWrapper=document.createElement("div"),tooltipWrapper.className="charts-tooltip-wrapper",t.appendChild(tooltipWrapper)),0!==e.opacity){if(t.classList.remove("above","below","no-transform"),e.yAlign?t.classList.add(e.yAlign):t.classList.add("no-transform"),e.body){var a=e.title||[],o=e.body.map(function(t){return t.lines}),s='<div class="tooltip-title">';a.forEach(function(t){s+='<div class="tooltip-title-item">'+t+"</div>"}),s+='</div><div class="tooltip-body">',o.forEach(function(t,a){var o=(""+t).split(":");s+='<div class="tooltip-body-item"><span style="background:'+e.labelColors[a].backgroundColor+'"></span>'+o[0]+":<b>"+o[1]+"</b></div>"}),s+="</div>",tooltipWrapper.innerHTML=s}var i=this._chart.canvas.offsetTop,r=this._chart.canvas.offsetLeft,d=this._chart.canvas.clientWidth,n=this._chart.canvas.clientHeight;t.style.opacity=1,t.style.left=r+"px",t.style.top=i+"px",t.style.width=d+"px",t.style.height=n+"px",tooltipPointer.style.left=e.caretX+"px",e.caretX+tooltipWrapper.clientWidth/2+30<d?tooltipWrapper.style.left=e.caretX+tooltipWrapper.clientWidth/2+30+"px":tooltipWrapper.style.left=e.caretX-tooltipWrapper.clientWidth/2-30+"px"}else t.style.opacity=0},totalHistogramm=new Chart(totalHistogrammWrap,{type:"line",data:{},options:{responsive:!0,scales:{xAxes:[{ticks:{maxTicksLimit:6,beginAtZero:!1},gridLines:{display:!1}}],yAxes:[{ticks:{stepSize:3e3,suggestedMax:15e3,stacked:!0,beginAtZero:!1},gridLines:{display:!0,zeroLineWidth:0,color:"rgba(0,0,0,.05)"},scaleLabel:{fontColor:"#FFF"}}]},tooltips:{enabled:!1,mode:"index",position:"nearest",intersect:!1,custom:totalHistogrammTooltips},title:{display:!1},legend:{display:!1},elements:{rectangle:{backgroundColor:"rgba(0,0,0,0.8)",borderWidth:0},point:{radius:2,hoverRadius:4}},animation:{duration:3e3}}}),totalPie=new Chart(document.getElementById("dashboard-cryptoassets-total"),{type:"pie",data:{},options:{responsive:!0,tooltips:{enabled:!1},legend:{display:!1},elements:{arc:{borderWidth:0}},maintainAspectRatio:!1,pieceLabel:{render:function(t){return" "+t.label+" "+t.percentage+"% "},precision:0,fontColor:"#767676",fontSize:16,fontStyle:"500",fontFamily:"'Montserrat', sans-serif",position:"outside",overlap:!0},animation:{duration:2e3}}});function updateData(t,a,o){t.data.labels=a,t.data.datasets=o,t.update()}var dashboardPage={bigDigitsTotalHistogrammBtc:document.querySelector(".dashboard-charts-total_histogramm-btc"),bigDigitsNoninvestedFounds:document.querySelector(".dashboard-charts-noninvested_founds-body .big-digits"),bigDigitsTotalinvestedFounds:document.querySelector(".dashboard-charts-totalinvested_founds-body .big-digits"),cryptoassetsTotalPie:document.querySelector("#dashboard-cryptoassets-total"),totalHistogramm:document.querySelector("#total_histogramm")};window.addEventListener("load",function(){histogrammMenu(document.querySelector(".histogramm-menu")),$.each(datasetDashboard.productPrices.m6,function(t,a){$(".dashboard-products-row-"+t+" .dashboard-products-row-value").html("$ "+a)}),$.each(datasetDashboard.productReturns.all,function(t,a){$(".dashboard-products-row-"+t+" .dashboard-products-row-diff").html((1*a<0?'<span class="icon-color-arrow icon-color-arrow-down"></span>':'<span class="icon-color-arrow icon-color-arrow-up"></span>+')+a)})}),window.addEventListener("scroll",function(){window.pageYOffset||document.documentElement.scrollTop;dashboardPage.bigDigitsTotalHistogrammBtc&&isVisible(dashboardPage.bigDigitsTotalHistogrammBtc)&&incrementDigits.init(".dashboard-charts-total_histogramm-btc",{decimalPlaces:6,decimalPoint:".",duration:1500}),dashboardPage.bigDigitsNoninvestedFounds&&isVisible(dashboardPage.bigDigitsNoninvestedFounds)&&incrementDigits.init(".dashboard-charts-noninvested_founds-body .big-digits",{thousandSeparator:",",decimalPlaces:2,decimalPoint:".",duration:1500}),dashboardPage.bigDigitsTotalinvestedFounds&&isVisible(dashboardPage.bigDigitsTotalinvestedFounds)&&incrementDigits.init(".dashboard-charts-totalinvested_founds-body .big-digits",{decimalPlaces:6,decimalPoint:".",duration:1500}),dashboardPage.totalHistogramm&&isVisible(dashboardPage.totalHistogramm)&&(dashboardPage.totalHistogramm=!1,updateData(totalHistogramm,datasetDashboard.totalHistogramm.d1.labels,datasetDashboard.totalHistogramm.d1.datasets)),dashboardPage.cryptoassetsTotalPie&&isVisible(dashboardPage.cryptoassetsTotalPie)&&(dashboardPage.cryptoassetsTotalPie=!1,updateData(totalPie,datasetDashboard.productPie.conservative.labels,datasetDashboard.productPie.conservative.datasets))}),$(".pricing-periods-item").on("click",function(){$(".pricing-periods-item").removeClass("active"),$(this).addClass("active");var t=this.offsetLeft;$(".pricing-periods-indicator").css("transform","translateX("+t+"px)");var a=datasetDashboard.productPrices[$(this).data("period")];$.each(a,function(t,a){$(".dashboard-products-row-"+t+" .dashboard-products-row-value").html("$ "+a)})}),$(".dashboard-products-row").on("click",function(){var t=$(this).data("product");$(".dashboard-charts-cryptoassets-body-col_2 h5").text(t+" trust"),updateData(totalPie,datasetDashboard.productPie[t].labels,datasetDashboard.productPie[t].datasets)}),$(".histogramm-menu span").on("click",function(){var t=$(this).data("period");updateData(totalHistogramm,datasetDashboard.totalHistogramm[t].labels,datasetDashboard.totalHistogramm[t].datasets)}),$("#product-returns").on("change",function(){var t=$(this).val(),a=datasetDashboard.productReturns[t];$.each(a,function(t,a){$(".dashboard-products-row-"+t+" .dashboard-products-row-diff").html((1*a<0?'<span class="icon-color-arrow icon-color-arrow-down"></span>':'<span class="icon-color-arrow icon-color-arrow-up"></span>+')+a)})}),$(".dashboard-products-row-qty input").on("blur",function(t){var a=parseInt($(this).val());isNaN(a)&&$(this).val(0)}),$(".dashboard-products-row-btn .btn").on("click",function(t){t.preventDefault();var a=$(".pricing-periods-item.active").data("period"),o=$(this).closest(".dashboard-products-row"),e=o.find(".dashboard-products-row-qty input").val(),s=o.find(".dashboard-products-row-value").text();s=s.replace(/[\s\$,]/g,"");var i=$(this).data("product"),r=$(this).data("targetUrl");if(0<e){var d=$(".popup-shadow");$(".popup-product_buy-info-name").html(o.find(".dashboard-products-row-name").html()),$(".popup-product_buy-cost").text("$ "+s),$(".popup-product_buy-qty input").val(e),$(".popup-product_buy-total").text("$ "+e*s),$(".popup-product_buy-info button").data({link:r,qty:e,name:i,period:a}),$(".popup").removeClass("visible"),d.fadeIn(300,function(){$(".popup.popup-product_buy").addClass("visible")})}else displayPopupMsg("<h4>Enter product quantity</h4>")}),$(".popup-product_buy-info button").on("click",function(){var a=$(this);a.prop("disabled",!0),$.ajax({url:a.data("link"),type:"POST",cache:!1,data:{qty:a.data("qty"),name:a.data("name"),period:a.data("period")},dataType:"json",processData:!1,contentType:!1,success:function(t){"success"==t.status?(displayPopupMsg("<h4>Product Added!</h4>"),setTimeout(function(){window.location.href="/myproducts"},2e3),a.prop("disabled",!1)):displayPopupMsg(t.error)},complete:function(){a.prop("disabled",!1)}})});