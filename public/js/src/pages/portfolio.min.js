var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");supportBlock.section=!1;
var chartsPeriod="m1",ticksLimit=1139<windowWidth?15:10,charts={},graphColors="#005f89 #006c9b #107dac #189ad3 #34aedb #71c7ec #007489 #00839b #1094ac #18b5d3 #34c5db #71d9ec #268900 #2b9b00 #3cac10 #4cd318 #67db34 #94ec71 #890087 #9b009a #ac10ab #d318d1 #d634db #ec71eb #89000b #9b000c #ac101d #d31827 #db3448 #ec717b #895200 #9b5e00 #ac6e10 #d38918 #db9334 #ecbb71 #fce5cd".split(" "),lineOptions={responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{maxTicksLimit:ticksLimit,maxRotation:0,minRotation:0,
beginAtZero:!1},gridLines:{display:!1}}],yAxes:[{ticks:{stacked:!0,beginAtZero:!1},gridLines:{display:!0,zeroLineWidth:0,color:"rgba(0,0,0,.05)"},scaleLabel:{fontColor:"#FFF"}}]},tooltips:{mode:"nearest",position:"average",intersect:!1,backgroundColor:"rgba(255,255,255,0.94)",borderColor:"rgba(0,0,0,0.15)",borderWidth:1,titleFontColor:"#000",titleFontFamily:"Montserrat",titleFontSize:12,titleMarginBottom:15,bodyFontColor:"#000",cornerRadius:0,xPadding:15,yPadding:10},title:{display:!1},legend:{display:!1},
elements:{rectangle:{backgroundColor:"rgba(0,0,0,0.8)",borderWidth:0},point:{radius:2,hoverRadius:4}},animation:{duration:3E3}},smallLineOptions={scales:{xAxes:[{weight:0,display:!1,ticks:{display:!0,backdropPaddingX:0},gridLines:{display:!1,color:"rgba(0,0,0,0.05)",lineWidth:1,drawBorder:!1}}],yAxes:[{ticks:{display:!1,backdropPaddingY:0},gridLines:{display:!0,color:"rgba(0,0,0,0.05)",lineWidth:1,drawBorder:!1}}]},tooltips:{enabled:!1},title:{display:!1},legend:{display:!1},animation:{duration:2E3}},
pieOptions={responsive:!0,tooltips:{enabled:!1},legend:{display:!1},elements:{arc:{borderWidth:0}},maintainAspectRatio:!1,pieceLabel:{render:function(a){return" "+a.label+" "+a.percentage+"% "},precision:0,fontColor:"#767676",fontSize:16,fontStyle:"500",fontFamily:"'Montserrat', sans-serif",position:"outside",overlap:!0},animation:{duration:2E3}},dashboardHeaderDigits=$(".dashboard-header .big-digits");
dashboardHeaderDigits.length&&($(".dashboard-header-totalbtc-value").spincrement({thousandSeparator:"",decimalPlaces:integrityEnv.isCurrentRateUSD?2:8,decimalPoint:".",duration:2E3}),$(".dashboard-header-totalpersents-value").spincrement({thousandSeparator:"",decimalPlaces:2,decimalPoint:".",duration:1500}),$(".dashboard-charts-total_histogramm-btc").spincrement({thousandSeparator:"",decimalPlaces:integrityEnv.isCurrentRateUSD?2:8,decimalPoint:".",duration:1500}));
var totalHistogramm=new Chart(document.getElementById("total_histogramm"),{type:"line",data:{labels:[],datasets:[]},options:{responsive:!0,scales:{xAxes:[{ticks:{maxTicksLimit:ticksLimit-4,maxRotation:0,minRotation:0,beginAtZero:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1,stacked:!0,beginAtZero:!1},gridLines:{display:!0,zeroLineWidth:0,color:"rgba(0,0,0,.05)"},scaleLabel:{fontColor:"#FFF"}}]},tooltips:{mode:"index",position:"average",intersect:!1,backgroundColor:"rgba(255,255,255,0.94)",
borderColor:"rgba(0,0,0,0.15)",borderWidth:1,titleFontColor:"#000",titleFontFamily:"Open Sans",titleFontSize:14,titleMarginBottom:15,bodyFontColor:"#000",cornerRadius:0,xPadding:15,yPadding:10},title:{display:!1},legend:{display:!1},elements:{rectangle:{backgroundColor:"rgba(0,0,0,0.8)",borderWidth:0},point:{radius:2,hoverRadius:4}},animation:{duration:3E3}}}),totalPie=new Chart(document.getElementById("portfolio-product-pie"),{type:"pie",data:{labels:["No Items"],datasets:[{data:[100],backgroundColor:["#f1f1f1"]}]},
options:pieOptions});
function updateSmallCharts(){$(".portfolio-row").each(function(a){a=this.id;var b=integrityEnv.instruments[a].chart;charts[a]||(charts[a]={});charts[a].small?(charts[a].small.data.labels=b[chartsPeriod].labels,charts[a].small.data.datasets.data=b[chartsPeriod].data,charts[a].small.update()):charts[a].small=new Chart($(this).find(".portfolio-row-graph canvas"),{type:"line",options:smallLineOptions,data:{datasets:[{pointBorderWidth:0,pointRadius:1,pointBackgroundColor:"rgba(8,233,56,1)",borderWidth:1,
lineTension:0,label:"",fill:!0,backgroundColor:"rgba(8,233,56,0.03)",borderColor:"rgba(8,233,56,1)",data:b[chartsPeriod].data}],labels:b[chartsPeriod].labels}})})}function updateMainCharts(){var a=mainChartsData();totalHistogramm.data.labels=a.line.labels;totalHistogramm.data.datasets=a.line.datasets;totalHistogramm.update();totalPie.data.labels=a.pie.labels;totalPie.data.datasets=a.pie.datasets;totalPie.update()}
function mainChartsData(){var a=integrityEnv.instruments,b=[],c=[],d=[],e=[],f=[],g=0;$.each(changePercents.getInstruments(),function(h,k){lineDataset={label:" "+a[h].fullname,pointBorderWidth:0,pointRadius:1,pointBackgroundColor:graphColors[g],pointBorderColor:"rgba(255,255,255,0)",backgroundColor:graphColors[g],borderWidth:2,borderColor:graphColors[g],lineTension:0,fill:!1,data:a[h].chart[chartsPeriod].data};c=a[h].chart[chartsPeriod].labels.length>c.length?a[h].chart[chartsPeriod].labels:c;b.push(lineDataset);
f.push(h);d.push(k);e.push(graphColors[g]);g++});100>changePercents.totalPercent()&&(f.push("No Items"),d.push(100-changePercents.totalPercent()),e.push("#f1f1f1"));return{line:{datasets:b,labels:c},pie:{datasets:[{data:d,backgroundColor:e}],labels:f}}}
function AddInstrument(a){if(integrityEnv.instruments[a]){var b=integrityEnv.instruments[a],c=1;switch(a){case "conservative":var d='<div class="portfolio-row-product_title"><img src="/images/special_service1.jpg"><h6>'+a+" trust</h6><small>TOP-5 cryptocurrencies and classic money market fixed income instruments</small></div>";break;case "classic":d='<div class="portfolio-row-product_title"><img src="/images/special_service2.jpg"><h6>'+a+" trust</h6><small>TOP-10 cryptocurrencies and most prospect ICO tokens</small></div>";
break;case "confident":d='<div class="portfolio-row-product_title"><img src="/images/special_service3.jpg"><h6>'+a+" trust</h6><small>Risky ICO of utility tokens and top-10 cryptocurrencies</small></div>";break;default:c=0,d='<div class="portfolio-row-title"><h6>'+a+"/USD</h6><small>"+b.fullname+'</small></div><div class="portfolio-row-value">'+b.value+"</div>"}b=$('<div class="portfolio-row" id="'+a+'">'+d+'<div class="portfolio-row-diff"><span class="icon-color-arrow icon-color-arrow-'+(0>1*b.diff?
"down":"up")+'"></span>'+b.diff+'</div><div class="portfolio-row-graph"><canvas></canvas></div><div class="portfolio-row-percent"><div class="portfolio-row-percent-edit"><input type="text" placeholder="Enter %" /><button>Ok</button><div class="portfolio-row-percent-error"></div></div><div class="portfolio-row-show"><span></span><span></span></div><span>0%</span></div><div class="portfolio-row-more"><canvas></canvas></div></div>');c?$(".portfolio-row-ready_products-add").before(b):$(".portfolio-list").append(b);
c=integrityEnv.instruments[a].chart;charts[a]={};charts[a].small=new Chart(b.find(".portfolio-row-graph canvas"),{type:"line",options:smallLineOptions,data:{datasets:[{pointBorderWidth:0,pointRadius:1,pointBackgroundColor:"rgba(8,233,56,1)",borderWidth:1,lineTension:0,label:"",fill:!0,backgroundColor:"rgba(8,233,56,0.03)",borderColor:"rgba(8,233,56,1)",data:c[chartsPeriod].data}],labels:c[chartsPeriod].labels}})}}
var portfolioPage=function(){return{bigDigitsPortfolioFree:document.querySelector(".portfolio-product-title-digits-free .big-digits"),bigDigitsPortfolioFunds:document.querySelector(".portfolio-product-title-digits-funds .big-digits"),bigDigitsPortfolioCreate:document.querySelector(".portfolio-product-title-digits-create .big-digits"),portfolioPie:document.querySelector("#portfolio-product-pie"),totalHistogramm:document.querySelector("#total_histogramm")}}();
window.addEventListener("load",function(){var a=document.querySelector(".histogramm-menu"),b=a.querySelector(".current"),c=a.querySelector(".active-border");c.style.marginLeft=b.offsetLeft+"px";c.style.width=b.offsetWidth+"px";histogrammMenu(a);$(".portfolio-row").each(function(a){a=this.id;var b=integrityEnv.instruments[a].chart;charts[a]||(charts[a]={},charts[a].small=new Chart($(this).find(".portfolio-row-graph canvas"),{type:"line",options:smallLineOptions,data:{datasets:[{pointBorderWidth:0,
pointRadius:1,pointBackgroundColor:"rgba(8,233,56,1)",borderWidth:1,lineTension:0,label:"",fill:!0,backgroundColor:"rgba(8,233,56,0.03)",borderColor:"rgba(8,233,56,1)",data:b[chartsPeriod].data}],labels:b[chartsPeriod].labels}}))});$(".popup-portfolio-product").each(function(a){a=$(this).data("id");a=integrityEnv.instruments[a].chart;new Chart($(this).find(".popup-portfolio-product-graph canvas"),{type:"line",options:smallLineOptions,data:{datasets:[{pointBorderWidth:0,pointRadius:1,pointBackgroundColor:"rgba(8,233,56,1)",
borderWidth:1,lineTension:0,label:"",fill:!0,backgroundColor:"rgba(8,233,56,0.03)",borderColor:"rgba(8,233,56,1)",data:a[chartsPeriod].data}],labels:a[chartsPeriod].labels}})})});
window.addEventListener("scroll",function(){portfolioPage.bigDigitsPortfolioFree&&isVisible(portfolioPage.bigDigitsPortfolioFree)&&incrementDigits.init(".portfolio-product-title-digits-free .big-digits",{decimalPlaces:integrityEnv.isCurrentRateUSD?2:8,decimalPoint:".",duration:1500});portfolioPage.bigDigitsPortfolioFunds&&isVisible(portfolioPage.bigDigitsPortfolioFunds)&&incrementDigits.init(".portfolio-product-title-digits-funds .big-digits",{decimalPlaces:integrityEnv.isCurrentRateUSD?2:8,decimalPoint:".",
duration:1500});portfolioPage.bigDigitsPortfolioCreate&&isVisible(portfolioPage.bigDigitsPortfolioCreate)&&incrementDigits.init(".portfolio-product-title-digits-create .big-digits",{thousandSeparator:",",decimalPlaces:integrityEnv.isCurrentRateUSD?2:8,decimalPoint:".",duration:1500})});$(".popup-portfolio-product-btn").on("click",function(){$(this).prop("disabled",!0);AddInstrument($(this).data("code"))});
1140>windowWidth?($(".portfolio-instruments").on("click",".portfolio-row-percent > span",function(){var a=$(this).closest(".portfolio-row");a.find(".portfolio-row-percent-edit input").val(changePercents.getPersent(a.attr("id")));a.find(".portfolio-row-percent-edit").addClass("visible");a.find(".portfolio-row-percent-edit input").focus()}),$(".portfolio-instruments").on("blur",".portfolio-row-percent-edit input",function(){var a=$(this).closest(".portfolio-row");changePercents.update(a);""==a.find(".portfolio-row-percent-error").text()&&
(a.find(".portfolio-row-percent-edit").removeClass("visible"),a.find(".portfolio-row-percent-error").removeClass("visible").text(""))})):($(".portfolio-instruments").on("click",".portfolio-row-percent-edit button",function(){changePercents.update($(this).closest(".portfolio-row"))}),$(".portfolio-instruments").on("mouseenter",".portfolio-row-percent > span",function(){var a=$(this).closest(".portfolio-row");a.find(".portfolio-row-percent-edit input").val(changePercents.getPersent(a.attr("id")));a.find(".portfolio-row-percent-edit").addClass("visible");
a.find(".portfolio-row-percent-edit input").focus()}),$(".portfolio-instruments").on("mouseleave",".portfolio-row-percent",function(){$(this).find(".portfolio-row-percent-edit input").val("");$(this).find(".portfolio-row-percent-edit").removeClass("visible");$(this).find(".portfolio-row-percent-error").removeClass("visible").text("")}));$(".portfolio-instruments").on("focus",".portfolio-row-percent-edit input",function(){$(this).closest(".portfolio-row").find(".portfolio-row-percent-error").removeClass("visible")});
$(".portfolio-instruments").on("click",".portfolio-row-show, .portfolio-row-graph canvas",function(){var a=$(this).closest(".portfolio-row"),b=a.attr("id");a.hasClass("opened")||(charts[b].large?(console.log(integrityEnv.instruments[b].chart[chartsPeriod].labels),charts[b].large.data.labels=integrityEnv.instruments[b].chart[chartsPeriod].labels,charts[b].large.data.datasets.data=integrityEnv.instruments[b].chart[chartsPeriod].data,charts[b].large.update()):charts[b].large=new Chart(a.find(".portfolio-row-more canvas"),
{type:"line",options:lineOptions,data:{datasets:[{label:" "+integrityEnv.instruments[b].fullname,pointBorderWidth:0,pointRadius:1,pointBackgroundColor:"rgba(8,233,56,1)",pointBorderColor:"rgba(255,255,255,0)",borderWidth:2,borderColor:"#08e938",lineTension:0,fill:!0,backgroundColor:"rgba(0,167,120,.02)",data:integrityEnv.instruments[b].chart[chartsPeriod].data}],labels:integrityEnv.instruments[b].chart[chartsPeriod].labels}}));a.find(".portfolio-row-more").slideToggle(300);a.toggleClass("opened")});
$(".portfolio-product-title .btn_light_grey").on("click",function(){$("body").scrollTo(".portfolio-instruments",400)});
var changePercents=function(){var a={};return{getInstruments:function(){return a},getPersent:function(b){return a[b]&&0<a[b]?a[b]:""},totalPercent:function(){var b=0,c="<b>You already choose:</b>";$.each(a,function(a,e){c+=" <span>"+a+"("+e+"%)</span>,";b+=e});100==b?($(".portfolio-total-percent").text(""),$(".portfolio-total-set").html(c.substr(0,c.length-1))):0==b?($(".portfolio-total-set").html("<b>You already choose:</b> no instruments"),$(".portfolio-total-percent").text("Place 100% by instruments")):
($(".portfolio-total-set").html(c.substr(0,c.length-1)),$(".portfolio-total-percent").text("Place another "+(100-b)+"%"));return b},update:function(b){var c=parseInt(b.find(".portfolio-row-percent-edit input").val()),d=b.attr("id");""==b.find(".portfolio-row-percent-edit input").val()||0==c?(b.find(".portfolio-row-percent > span").text("0%"),b.find(".portfolio-row-percent-edit").removeClass("visible"),delete a[d],updateMainCharts(),this.totalPercent()):c&&c<=100-this.totalPercent()+(a[d]?a[d]:0)?
("none"==$(".portfolio-product-body-graphs").css("display")&&($(".portfolio-product-body-graphs").slideDown(300),$("body").scrollTo($(".portfolio-product-body-graphs"),400)),b.find(".portfolio-row-percent > span").text(c+"%"),b.find(".portfolio-row-percent-edit").removeClass("visible"),a[d]=c,100==this.totalPercent()?$("#portfolio-create-product").prop("disabled",!1):$("#portfolio-create-product").prop("disabled",!0),updateMainCharts()):(this.totalPercent(),b.find(".portfolio-row-percent-error").text("Type the percent less than "+
(100-this.totalPercent()+(a[d]?a[d]:0))).addClass("visible"))}}}();
$("#portfolio-create-product").on("click",function(){var a=$(this),b=new FormData,c=changePercents.getInstruments();a.prop("disabled",!0);for(var d in c)b.set("assets["+d+"]",c[d]);$.ajax({url:a.data("link"),type:"POST",cache:!1,data:b,dataType:"json",processData:!1,contentType:!1,success:function(b){"success"==b.status?(displayPopupMsg("<h4>Product Added!</h4>"),setTimeout(function(){window.location.href="/myproducts"},2E3),a.prop("disabled",!1)):displayPopupMsg(b.error)},complete:function(){a.prop("disabled",
!1)}})});$(".portfolio-product-body-graph .histogramm-menu span").on("click",function(){chartsPeriod=$(this).data("period");$(".portfolio-row-more").slideUp(300);$(".portfolio-row.opened").removeClass("opened");updateMainCharts();updateSmallCharts()});
